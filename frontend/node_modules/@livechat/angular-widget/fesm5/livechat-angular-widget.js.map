{"version":3,"file":"livechat-angular-widget.js","sources":["ng://@livechat/angular-widget/src/livechat-widget.component.ts","ng://@livechat/angular-widget/src/livechat-widget.module.ts","ng://@livechat/angular-widget/livechat-angular-widget.ts"],"sourcesContent":["import { Component, OnInit, Input, Output } from '@angular/core';\nimport { LiveChatWidgetApiModel } from './livechat-widget.models';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'livechat-widget',\n  template: ``,\n  styles: []\n})\nexport class LivechatWidgetComponent implements OnInit {\n  @Input() licenseId: number;\n  @Input() group: number;\n  @Input() chatBetweenGroups: boolean;\n  @Input() params: { name: string, value: any };\n  @Input() visitor: { name: string, email: string, };\n  @Input() gaVersion: string;\n  @Output() public onChatLoaded = new Subject<LiveChatWidgetApiModel>();\n  @Output() public onAfterLoad = new Subject();\n  @Output() public onBeforeLoad = new Subject();\n  @Output() public onChatEnded = new Subject();\n  @Output() public onChatStarted = new Subject<any>();\n  @Output() public onChatStateChanged = new Subject<any>();\n  @Output() public onChatWindowHidden = new Subject();\n  @Output() public onChatWindowMinimized = new Subject();\n  @Output() public onChatWindowOpened = new Subject(); data\n  @Output() public onMessage = new Subject<any>();\n  @Output() public onPostchatSurveySubmitted = new Subject<any>();\n  @Output() public onPrechatSurveySubmitted = new Subject<any>();\n  @Output() public onRatingCommentSubmitted = new Subject<any>();\n  @Output() public onRatingSubmitted = new Subject<any>();\n  @Output() public onTicketCreated = new Subject<any>();\n  @Output() public onWidgetResize = new Subject();\n\n  public agentsAreAvailable: Function;\n  public chatRunning: Function;\n  public chatWindowHidden: Function;\n  public chatWindowMaximized: Function;\n  public chatWindowMinimized: Function;\n  public closeChat: Function;\n  public getChatId: Function;\n  public getChatsNumber: Function;\n  public getLastVisitTimestamp: Function;\n  public getPageViewsNumber: Function;\n  public getVisitorId: Function;\n  public getVisitsNumber: Function;\n  public hideChatWindow: Function;\n  public minimizeChatWindow: Function;\n  public openChatWindow: Function;\n  public setCustomVariables: Function;\n  public setVisitorEmail: Function;\n  public setVisitorName: Function;\n  public triggerSalesTracker: Function;\n  public updateCustomVariables: Function;\n  public visitorEngaged: Function;\n  public visitorQueued: Function;\n  private lc: HTMLScriptElement;\n\n  constructor() { }\n\n  ngOnInit() {\n    if (!window['LC_API']) {\n      window['__lc'] = window['__lc'] || {};\n      window['__lc'].license = this.licenseId;\n      window['__lc'].group = this.group;\n      window['__lc'].chat_between_groups = this.chatBetweenGroups;\n      window['__lc'].params = this.params;\n      window['__lc'].visitor = this.visitor;\n      window['__lc'].ga_version = this.gaVersion;\n      const api = { _q: [], _h: null, call: (...args) =>  api._h && api._h.apply(null, ['call', [].slice.call(args)])  };\n      window['LiveChatWidget'] = api;\n      this.lc = document.createElement('script');\n      this.lc.type = 'text/javascript';\n      this.lc.async = true;\n      this.lc.src = 'https://cdn.livechatinc.com/tracking.js';\n      const s = document.getElementsByTagName('script')[0];\n      s.parentNode.insertBefore(this.lc, s);\n      this.lc.addEventListener('load', () => {\n        this._chatLoaded(window['LC_API']);\n      });\n      this.lc.addEventListener('error', (error) => {\n        console.error(error);\n      });\n    }\n  }\n\n  ngOnDestroy(){\n    if(window['LiveChatWidget'] && typeof window['LiveChatWidget'].call === 'function') {\n      window['LiveChatWidget'].call('destroy');\n      this.lc && this.lc.remove();\n      ['secure.livechat.com', 'secure.livechatinc.com'].forEach(domain => {\n        Array.from(document.querySelectorAll(`[src*=\"${domain}\"]`)).forEach(s => s.remove())\n      })\n    }\n  }\n\n  private _chatLoaded(LC_API: LiveChatWidgetApiModel) {\n    this._setCallbacks(LC_API);\n    this._setMethods(LC_API);\n    this.onChatLoaded.next(LC_API);\n  }\n\n  private _setCallbacks(LC_API: LiveChatWidgetApiModel) {\n    LC_API.on_after_load = () => this.onAfterLoad.next();\n    LC_API.on_before_load = () => this.onBeforeLoad.next();\n    LC_API.on_chat_ended = () => this.onChatEnded.next();\n    LC_API.on_chat_started = (data) => this.onChatStarted.next(data);\n    LC_API.on_chat_state_changed = (data) => this.onChatStateChanged.next(data);\n    LC_API.on_chat_window_hidden = () => this.onChatWindowHidden.next();\n    LC_API.on_chat_window_minimized = () => this.onChatWindowMinimized.next();\n    LC_API.on_chat_window_opened = () => this.onChatWindowOpened.next();\n    LC_API.on_message = (data) => this.onMessage.next(data);\n    LC_API.on_postchat_survey_submitted = (data) => this.onPostchatSurveySubmitted.next(data);\n    LC_API.on_prechat_survey_submitted = (data) => this.onPrechatSurveySubmitted.next(data);\n    LC_API.on_rating_comment_submitted = (data) => this.onRatingCommentSubmitted.next(data);\n    LC_API.on_rating_submitted = (data) => this.onRatingSubmitted.next(data);\n    LC_API.on_ticket_created = (data) => this.onTicketCreated.next(data);\n  }\n\n  private _setMethods(LC_API: LiveChatWidgetApiModel) {\n    this.agentsAreAvailable = () => LC_API.agents_are_available();\n    this.chatRunning = () => LC_API.chat_running();\n    this.chatWindowHidden = () => LC_API.chat_window_hidden();\n    this.chatWindowMaximized = () => LC_API.chat_window_maximized();\n    this.chatWindowMinimized = () => LC_API.chat_window_minimized();\n    this.closeChat = () => LC_API.close_chat();\n    this.getChatId = () => LC_API.get_chat_id();\n    this.getChatsNumber = () => LC_API.get_chats_number();\n    this.getLastVisitTimestamp = () => LC_API.get_last_visit_timestamp();\n    this.getPageViewsNumber = () => LC_API.get_page_views_number();\n    this.getVisitorId = () => LC_API.get_visitor_id();\n    this.getVisitsNumber = () => LC_API.get_visits_number();\n    this.hideChatWindow = () => LC_API.hide_chat_window();\n    this.minimizeChatWindow = () => LC_API.minimize_chat_window();\n    this.openChatWindow = () => LC_API.open_chat_window();\n    this.setCustomVariables = (t) => LC_API.set_custom_variables(t);\n    this.setVisitorEmail = (t) => LC_API.set_visitor_email(t);\n    this.setVisitorName = (t) => LC_API.set_visitor_name(t);\n    this.triggerSalesTracker = (e, t) => LC_API.trigger_sales_tracker(e, t);\n    this.updateCustomVariables = (t) => LC_API.update_custom_variables(t);\n    this.visitorEngaged = () => LC_API.visitor_engaged();\n    this.visitorQueued = () => LC_API.visitor_queued();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LivechatWidgetComponent } from './livechat-widget.component';\n\n@NgModule({\n  imports: [],\n  declarations: [LivechatWidgetComponent],\n  exports: [LivechatWidgetComponent]\n})\nexport class LivechatWidgetModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}